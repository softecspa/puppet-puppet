[main]
logdir = /var/log/puppet
vardir = /var/lib/puppet
ssldir = /var/lib/puppet/ssl
rundir = /var/run/puppet
factpath = $vardir/lib/facter
modulepath = $confdir/modules:/usr/share/puppet/modules
templatedir = $confdir/templates
path = /usr/local/sbin:/usr/local/bin:/usr/sbin:/usr/bin:/sbin:/bin
certname = puppet.softecspa.it
ca_server = puppet.softecspa.it
server = puppet.softecspa.it

syslogfacility = puppet
prerun_command = /etc/puppet/etckeeper-commit-pre
postrun_command = /etc/puppet/etckeeper-commit-post
pluginsync = true

[master]
ssl_client_header = SSL_CLIENT_S_DN 
ssl_client_verify_header = SSL_CLIENT_VERIFY
storeconfigs = true
storeconfigs_backend = puppetdb
reports = store, datadog_reports
autosign = false
certname=puppet.softecspa.it
report = true
pluginsync = true

[agent]
certname=<%= @fqdn %>
<% if has_variable?("zone") then %>
environment=<%= zone %>
<% else %>
environment=production
<% end %>
server=puppet.softecspa.it
graph=true
graphdir=/var/puppet

########################
###   ENVIRONMENTS   ###
########################
[development]
manifest=/etc/puppet/envs/development/manifests/site.pp
modulepath=/etc/puppet/envs/development/modules:/usr/share/puppet/modules

[production]
manifest=/etc/puppet/envs/production/manifests/site.pp
modulepath=/etc/puppet/envs/production/modules:/usr/share/puppet/modules
